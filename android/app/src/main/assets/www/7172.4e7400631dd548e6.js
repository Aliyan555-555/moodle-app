"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7172,5093,5398],{77177:(e,r,s)=>{s.r(r),s.d(r,{CoreGradesCoursesLazyModule:()=>U});var t=s(67643),o=s(23966),a=s(38049),n=s(13386),i=s(49618),c=s(21959),u=s(49671),l=s(1389),d=s(25233),_=s(30242),p=s(29535),g=s(26442),C=s(43468),m=s(53564),f=s(13010),I=s(75803),h=s(10727),T=s(19212),y=s(96814),x=s(55126),P=s(66931),A=s(8947),Z=s(29657),G=s(31903),L=s(89515);function CoreGradesCoursesPage_core_empty_box_15_Template(e,r){1&e&&(T._UZ(0,"core-empty-box",7),T.ALo(1,"translate")),2&e&&T.Q6J("message",T.lcZ(1,1,"core.grades.nogradesreturned"))}function CoreGradesCoursesPage_ion_list_16_ion_item_1_span_4_Template(e,r){1&e&&(T.TgZ(0,"span",13),T._uU(1),T.ALo(2,"translate"),T.qZA()),2&e&&(T.xp6(),T.hij(" ",T.lcZ(2,1,"core.grades.grade")," "))}function CoreGradesCoursesPage_ion_list_16_ion_item_1_Template(e,r){if(1&e){const e=T.EpF();T.TgZ(0,"ion-item",9),T.NdJ("click",(function CoreGradesCoursesPage_ion_list_16_ion_item_1_Template_ion_item_click_0_listener(){const r=T.CHM(e).$implicit,s=T.oxw(2);return T.KtG(s.courses.select(r))})),T.TgZ(1,"ion-label"),T._UZ(2,"core-format-text",10),T.qZA(),T.TgZ(3,"ion-badge",11),T.YNc(4,CoreGradesCoursesPage_ion_list_16_ion_item_1_span_4_Template,3,3,"span",12),T._uU(5),T.qZA()()}if(2&e){const e=r.$implicit,s=T.oxw(2);T.Q6J("detail",!0),T.uIk("aria-label",e.courseFullName)("aria-current",s.courses.getItemAriaCurrent(e)),T.xp6(2),T.Q6J("text",e.courseFullName)("contextInstanceId",e.courseid),T.xp6(2),T.Q6J("ngIf",e.grade&&"-"!==e.grade),T.xp6(),T.hij(" ",e.grade," ")}}function CoreGradesCoursesPage_ion_list_16_Template(e,r){if(1&e&&(T.TgZ(0,"ion-list"),T.YNc(1,CoreGradesCoursesPage_ion_list_16_ion_item_1_Template,6,7,"ion-item",8),T.qZA()),2&e){const e=T.oxw();T.xp6(),T.Q6J("ngForOf",e.courses.items)}}let M=(()=>{var e;class CoreGradesCoursesPage{constructor(){const e=d.p.getOrCreateSource(p.s,[]);this.courses=new CoreGradesCoursesManager(e,CoreGradesCoursesPage)}ngAfterViewInit(){var e=this;return(0,u.Z)((function*(){yield e.fetchInitialCourses(),e.courses.start(e.splitView)}))()}ngOnDestroy(){this.courses.destroy()}refreshCourses(e){var r=this;return(0,u.Z)((function*(){yield I.Tr.ignoreErrors(g.$.invalidateCoursesGradesData()),yield I.Tr.ignoreErrors(r.courses.reload()),null==e||e.complete()}))()}fetchInitialCourses(){var e=this;return(0,u.Z)((function*(){try{yield e.courses.load()}catch(e){f.OQ.showErrorModalDefault(e,"Error loading courses")}}))()}}return(e=CoreGradesCoursesPage).ɵfac=function CoreGradesCoursesPage_Factory(r){return new(r||e)},e.ɵcmp=T.Xpm({type:e,selectors:[["page-core-grades-courses"]],viewQuery:function CoreGradesCoursesPage_Query(e,r){if(1&e&&T.Gf(_.A,5),2&e){let e;T.iGM(e=T.CRH())&&(r.splitView=e.first)}},decls:17,vars:13,consts:[["slot","start"],[3,"text"],["slot","fixed",3,"disabled","ionRefresh"],[3,"pullingText"],[3,"hideUntil"],["icon","fas-chart-bar",3,"message",4,"ngIf"],[4,"ngIf"],["icon","fas-chart-bar",3,"message"],["class","ion-text-wrap","button","",3,"detail","click",4,"ngFor","ngForOf"],["button","",1,"ion-text-wrap",3,"detail","click"],["contextLevel","course",3,"text","contextInstanceId"],["slot","end","color","light"],["class","sr-only",4,"ngIf"],[1,"sr-only"]],template:function CoreGradesCoursesPage_Template(e,r){1&e&&(T.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),T._UZ(3,"ion-back-button",1),T.ALo(4,"translate"),T.qZA(),T.TgZ(5,"ion-title")(6,"h1"),T._uU(7),T.ALo(8,"translate"),T.qZA()()()(),T.TgZ(9,"ion-content")(10,"core-split-view")(11,"ion-refresher",2),T.NdJ("ionRefresh",(function CoreGradesCoursesPage_Template_ion_refresher_ionRefresh_11_listener(e){return r.refreshCourses(e.target)})),T._UZ(12,"ion-refresher-content",3),T.ALo(13,"translate"),T.qZA(),T.TgZ(14,"core-loading",4),T.YNc(15,CoreGradesCoursesPage_core_empty_box_15_Template,2,3,"core-empty-box",5)(16,CoreGradesCoursesPage_ion_list_16_Template,2,1,"ion-list",6),T.qZA()()()),2&e&&(T.xp6(3),T.Q6J("text",T.lcZ(4,7,"core.back")),T.xp6(4),T.Oqu(T.lcZ(8,9,"core.grades.grades")),T.xp6(4),T.Q6J("disabled",!r.courses.loaded),T.xp6(),T.s9C("pullingText",T.lcZ(13,11,"core.pulltorefresh")),T.xp6(2),T.Q6J("hideUntil",r.courses.loaded),T.xp6(),T.Q6J("ngIf",r.courses.empty),T.xp6(),T.Q6J("ngIf",!r.courses.empty))},dependencies:[y.sg,y.O5,x.z,P.r,_.A,A.r,Z.t,G.yp,G.Sm,G.W2,G.Gu,G.Ie,G.Q$,G.q_,G.nJ,G.Wo,G.wd,G.sr,G.oU,L.X$],encapsulation:2}),CoreGradesCoursesPage})();class CoreGradesCoursesManager extends l.a{logActivity(){return(0,u.Z)((function*(){yield g.$.logCoursesGradesView(),C.ke.logEvent({type:C.gM.VIEW_ITEM_LIST,ws:"gradereport_overview_view_grade_report",name:h.vN.instant("core.grades.grades"),data:{courseId:m.m9.getCurrentSiteHomeId(),category:"grades"},url:"/grade/report/overview/index.php"})}))()}}const v=[{path:"",component:M,children:[{path:":courseId",component:i.N}]}],S=[...(0,o.Vr)([{path:"",component:M},{path:":courseId",component:i.N}],(()=>a.X4.isMobile)),...(0,o.Vr)(v,(()=>a.X4.isTablet))];let U=(()=>{var e;class CoreGradesCoursesLazyModule{}return(e=CoreGradesCoursesLazyModule).ɵfac=function CoreGradesCoursesLazyModule_Factory(r){return new(r||e)},e.ɵmod=T.oAB({type:e}),e.ɵinj=T.cJS({imports:[t.Bz.forChild(S),n.L,c.u]}),CoreGradesCoursesLazyModule})();void(("undefined"==typeof ngJitMode||ngJitMode)&&T.kYT(U,{declarations:[M],imports:[t.Bz,n.L,c.u]}))},85093:(e,r,s)=>{s.d(r,{f:()=>CoreUserParticipantsSource});var t=s(49671),o=s(54129),a=s(45151);class CoreUserParticipantsSource extends o.H{static getSourceId(e,r=null){var s;return`participants-${e}-${r=null!==(s=r)&&void 0!==s?s:"__empty__"}`}constructor(e,r=null){super(),this.COURSE_ID=e,this.SEARCH_QUERY=r}getItemPath(e){return e.id.toString()}getItemQueryParams(){return{search:this.SEARCH_QUERY}}loadPageItems(e){var r=this;return(0,t.Z)((function*(){if(r.SEARCH_QUERY){const{participants:s,canLoadMore:t}=yield a.My.searchParticipants(r.COURSE_ID,r.SEARCH_QUERY,!0,e,a.UJ.PARTICIPANTS_LIST_LIMIT);return{items:s,hasMoreItems:t}}const{participants:s,canLoadMore:t}=yield a.My.getParticipants(r.COURSE_ID,e*a.UJ.PARTICIPANTS_LIST_LIMIT,a.UJ.PARTICIPANTS_LIST_LIMIT);return{items:s,hasMoreItems:t}}))()}getPageLength(){return a.UJ.PARTICIPANTS_LIST_LIMIT}}}}]);