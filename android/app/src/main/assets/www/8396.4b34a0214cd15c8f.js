"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8396],{98396:(e,n,t)=>{t.r(n),t.d(n,{CoreSiteHomeLazyModule:()=>L});var o=t(67643),_=t(13386),i=t(94283),a=t(74168),r=t(49671),c=t(73180),s=t(13010),l=t(53564),g=t(88831),m=t(92974),d=t(98370),u=t(68050),p=t(7341),x=t(9588),C=t(43555),I=t(727),f=t(75803),S=t(88817),h=t(43468),T=t(88328),H=t(19212),P=t(96814),b=t(55126),y=t(66931),w=t(78308),v=t(76025),Z=t(86700),k=t(8947),O=t(29657),M=t(22068),J=t(31903),Q=t(44202),F=t(45810),N=t(89515);function CoreSiteHomeIndexPage_ion_button_1_Template(e,n){if(1&e){const e=H.EpF();H.TgZ(0,"ion-button",14),H.NdJ("click",(function CoreSiteHomeIndexPage_ion_button_1_Template_ion_button_click_0_listener(){H.CHM(e);const n=H.oxw();return H.KtG(n.openSearch())})),H.ALo(1,"translate"),H._UZ(2,"ion-icon",15),H.qZA()}2&e&&H.uIk("aria-label",H.lcZ(1,1,"core.courses.searchcourses"))}function CoreSiteHomeIndexPage_ng_container_8_ion_item_1_Template(e,n){if(1&e&&(H.TgZ(0,"ion-item",18)(1,"ion-label"),H._UZ(2,"core-format-text",19),H.qZA()()),2&e){const e=H.oxw(2);H.xp6(2),H.Q6J("text",e.section.summary)("contextInstanceId",e.siteHomeId)}}function CoreSiteHomeIndexPage_ng_container_8_core_course_module_2_Template(e,n){if(1&e&&H._UZ(0,"core-course-module",20),2&e){const e=n.$implicit,t=H.oxw(2);H.Q6J("module",e)("section",t.section)}}function CoreSiteHomeIndexPage_ng_container_8_Template(e,n){if(1&e&&(H.ynx(0),H.YNc(1,CoreSiteHomeIndexPage_ng_container_8_ion_item_1_Template,3,2,"ion-item",16)(2,CoreSiteHomeIndexPage_ng_container_8_core_course_module_2_Template,1,2,"core-course-module",17),H.BQk()),2&e){const e=H.oxw();H.xp6(),H.Q6J("ngIf",e.section.summary),H.xp6(),H.Q6J("ngForOf",e.section.modules)}}function CoreSiteHomeIndexPage_ng_container_9_core_spacer_1_Template(e,n){1&e&&H._UZ(0,"core-spacer")}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_2_1_ng_template_0_Template(e,n){}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_2_1_Template(e,n){1&e&&H.YNc(0,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_2_1_ng_template_0_Template,0,0,"ng-template")}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_2_Template(e,n){if(1&e&&(H.ynx(0),H.YNc(1,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_2_1_Template,1,0,null,24),H.BQk()),2&e){H.oxw(3);const e=H.MAs(13);H.xp6(),H.Q6J("ngTemplateOutlet",e)}}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_3_1_ng_template_0_Template(e,n){}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_3_1_Template(e,n){1&e&&H.YNc(0,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_3_1_ng_template_0_Template,0,0,"ng-template")}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_3_Template(e,n){if(1&e&&(H.ynx(0),H.YNc(1,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_3_1_Template,1,0,null,24),H.BQk()),2&e){H.oxw(3);const e=H.MAs(17);H.xp6(),H.Q6J("ngTemplateOutlet",e)}}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_4_1_ng_template_0_Template(e,n){}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_4_1_Template(e,n){1&e&&H.YNc(0,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_4_1_ng_template_0_Template,0,0,"ng-template")}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_4_Template(e,n){if(1&e&&(H.ynx(0),H.YNc(1,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_4_1_Template,1,0,null,24),H.BQk()),2&e){H.oxw(3);const e=H.MAs(21);H.xp6(),H.Q6J("ngTemplateOutlet",e)}}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_5_1_ng_template_0_Template(e,n){}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_5_1_Template(e,n){1&e&&H.YNc(0,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_5_1_ng_template_0_Template,0,0,"ng-template")}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_5_Template(e,n){if(1&e&&(H.ynx(0),H.YNc(1,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_5_1_Template,1,0,null,24),H.BQk()),2&e){H.oxw(3);const e=H.MAs(19);H.xp6(),H.Q6J("ngTemplateOutlet",e)}}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_6_1_ng_template_0_Template(e,n){}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_6_1_Template(e,n){1&e&&H.YNc(0,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_6_1_ng_template_0_Template,0,0,"ng-template")}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_6_Template(e,n){if(1&e&&(H.ynx(0),H.YNc(1,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_6_1_Template,1,0,null,24),H.BQk()),2&e){H.oxw(3);const e=H.MAs(15);H.xp6(),H.Q6J("ngTemplateOutlet",e)}}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_Template(e,n){if(1&e&&(H.ynx(0)(1,22),H.YNc(2,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_2_Template,2,1,"ng-container",23)(3,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_3_Template,2,1,"ng-container",23)(4,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_4_Template,2,1,"ng-container",23)(5,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_5_Template,2,1,"ng-container",23)(6,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_6_Template,2,1,"ng-container",23),H.BQk()()),2&e){const e=n.$implicit;H.xp6(),H.Q6J("ngSwitch",e),H.xp6(),H.Q6J("ngSwitchCase","LIST_OF_COURSE"),H.xp6(),H.Q6J("ngSwitchCase","LIST_OF_CATEGORIES"),H.xp6(),H.Q6J("ngSwitchCase","COURSE_SEARCH_BOX"),H.xp6(),H.Q6J("ngSwitchCase","ENROLLED_COURSES"),H.xp6(),H.Q6J("ngSwitchCase","NEWS_ITEMS")}}function CoreSiteHomeIndexPage_ng_container_9_Template(e,n){if(1&e&&(H.ynx(0),H.YNc(1,CoreSiteHomeIndexPage_ng_container_9_core_spacer_1_Template,1,0,"core-spacer",6)(2,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_Template,7,6,"ng-container",21),H.BQk()),2&e){const e=H.oxw();H.xp6(),H.Q6J("ngIf",e.section&&e.section.hasContent),H.xp6(),H.Q6J("ngForOf",e.items)}}function CoreSiteHomeIndexPage_core_block_side_blocks_button_10_Template(e,n){if(1&e&&H._UZ(0,"core-block-side-blocks-button",25),2&e){const e=H.oxw();H.Q6J("instanceId",e.siteHomeId)}}function CoreSiteHomeIndexPage_core_empty_box_11_Template(e,n){1&e&&(H._UZ(0,"core-empty-box",26),H.ALo(1,"translate")),2&e&&H.Q6J("message",H.lcZ(1,1,"core.course.nocontentavailable"))}function CoreSiteHomeIndexPage_ng_template_12_Template(e,n){if(1&e){const e=H.EpF();H.TgZ(0,"ion-card")(1,"ion-item",27),H.NdJ("click",(function CoreSiteHomeIndexPage_ng_template_12_Template_ion_item_click_1_listener(){H.CHM(e);const n=H.oxw();return H.KtG(n.openAvailableCourses())})),H._UZ(2,"ion-icon",28),H.TgZ(3,"ion-label")(4,"p",29),H._uU(5),H.ALo(6,"translate"),H.qZA()()()()}2&e&&(H.xp6(5),H.Oqu(H.lcZ(6,1,"core.courses.availablecourses")))}function CoreSiteHomeIndexPage_ng_template_14_core_course_module_0_Template(e,n){if(1&e&&H._UZ(0,"core-course-module",31),2&e){const e=H.oxw(2);H.Q6J("module",e.newsForumModule)}}function CoreSiteHomeIndexPage_ng_template_14_Template(e,n){if(1&e&&H.YNc(0,CoreSiteHomeIndexPage_ng_template_14_core_course_module_0_Template,1,1,"core-course-module",30),2&e){const e=H.oxw();H.Q6J("ngIf",e.newsForumModule)}}function CoreSiteHomeIndexPage_ng_template_16_Template(e,n){if(1&e){const e=H.EpF();H.TgZ(0,"ion-card")(1,"ion-item",27),H.NdJ("click",(function CoreSiteHomeIndexPage_ng_template_16_Template_ion_item_click_1_listener(){H.CHM(e);const n=H.oxw();return H.KtG(n.openCourseCategories())})),H._UZ(2,"ion-icon",32),H.TgZ(3,"ion-label")(4,"p",29),H._uU(5),H.ALo(6,"translate"),H.qZA()()()()}2&e&&(H.xp6(5),H.Oqu(H.lcZ(6,1,"core.courses.categories")))}function CoreSiteHomeIndexPage_ng_template_18_Template(e,n){if(1&e){const e=H.EpF();H.TgZ(0,"ion-card")(1,"ion-item",27),H.NdJ("click",(function CoreSiteHomeIndexPage_ng_template_18_Template_ion_item_click_1_listener(){H.CHM(e);const n=H.oxw();return H.KtG(n.openMyCourses())})),H._UZ(2,"ion-icon",28),H.TgZ(3,"ion-label")(4,"p",29),H._uU(5),H.ALo(6,"translate"),H.qZA()()()()}2&e&&(H.xp6(5),H.Oqu(H.lcZ(6,1,"core.courses.mycourses")))}function CoreSiteHomeIndexPage_ng_template_20_Template(e,n){if(1&e){const e=H.EpF();H.TgZ(0,"ion-card")(1,"ion-item",27),H.NdJ("click",(function CoreSiteHomeIndexPage_ng_template_20_Template_ion_item_click_1_listener(){H.CHM(e);const n=H.oxw();return H.KtG(n.openSearch())})),H._UZ(2,"ion-icon",33),H.TgZ(3,"ion-label")(4,"p",29),H._uU(5),H.ALo(6,"translate"),H.qZA()()()()}2&e&&(H.xp6(5),H.Oqu(H.lcZ(6,1,"core.courses.searchcourses")))}let E=(()=>{var e;class CoreSiteHomeIndexPage{constructor(e){var n=this;this.route=e,this.dataLoaded=!1,this.hasContent=!1,this.hasBlocks=!1,this.items=[],this.siteHomeId=1,this.searchEnabled=!1,this.updateSiteObserver=d.R.on(d.R.SITE_UPDATED,(()=>{this.searchEnabled=!m.B.isSearchCoursesDisabledInSite()}),l.m9.getCurrentSiteId()),this.logView=S.V.once((0,r.Z)((function*(){var e,t;yield f.Tr.ignoreErrors(c.FO.logView(n.siteHomeId)),h.ke.logEvent({type:h.gM.VIEW_ITEM,ws:"core_course_view_course",name:null!==(e=null===(t=n.currentSite.getInfo())||void 0===t?void 0:t.sitename)&&void 0!==e?e:"",data:{id:n.siteHomeId,category:"course"},url:"/?redirect=0"})})))}ngOnInit(){this.searchEnabled=!m.B.isSearchCoursesDisabledInSite(),this.currentSite=l.m9.getRequiredCurrentSite(),this.siteHomeId=l.m9.getCurrentSiteHomeId();const e=C.b.getRouteParam("module");if(e){const n=C.b.getRouteParam("modNavOptions");u.v.openModule(e,this.siteHomeId,{modNavOptions:n})}this.loadContent().finally((()=>{this.dataLoaded=!0})),this.openFocusedInstance(),this.route.queryParams.subscribe((()=>this.openFocusedInstance()))}loadContent(){var e=this;return(0,r.Z)((function*(){e.hasContent=!1;const n=e.currentSite.getStoredConfig()||{numsections:1,frontpageloggedin:void 0};if(e.items=yield g.CD.getFrontPageItems(n.frontpageloggedin),e.hasContent=e.items.length>0,e.items.includes("NEWS_ITEMS"))try{const n=yield g.CD.getNewsForum(e.siteHomeId);e.newsForumModule=yield c.FO.getModule(n.cmid,n.course),e.newsForumModule.handlerData=yield p.E.getModuleDataFor(e.newsForumModule.modname,e.newsForumModule,e.siteHomeId,void 0,!0)}catch{}try{const t=yield c.FO.getSections(e.siteHomeId,!1,!0);if(e.section=n.numsections?t.find((e=>1==e.section)):void 0,e.section){const n=yield u.v.addHandlerDataForModules([e.section],e.siteHomeId,void 0,void 0,!0);e.section.hasContent=n.hasContent,e.hasContent=n.hasContent||e.hasContent}e.logView()}catch(e){s.OQ.showErrorModalDefault(e,"core.course.couldnotloadsectioncontent",!0)}e.hasBlocks=yield I.n.hasCourseBlocks(e.siteHomeId)}))()}doRefresh(e){var n=this;const t=[];t.push(c.FO.invalidateSections(this.siteHomeId)),t.push(this.currentSite.invalidateConfig().then((0,r.Z)((function*(){const e=yield n.currentSite.getConfig();n.currentSite.setConfig(e)})))),t.push(c.FO.invalidateCourseBlocks(this.siteHomeId)),this.section&&this.section.modules&&t.push(x.e.invalidateModules(this.section.modules,this.siteHomeId)),Promise.all(t).finally((0,r.Z)((function*(){yield n.loadContent().finally((()=>{null==e||e.complete()}))})))}openSearch(){C.b.navigateToSitePath("courses/list",{params:{mode:"search"}})}openAvailableCourses(){C.b.navigateToSitePath("courses/list",{params:{mode:"all"}})}openMyCourses(){C.b.navigateToSitePath("courses/list",{params:{mode:"my"}})}openCourseCategories(){C.b.navigateToSitePath("courses/categories")}ngOnDestroy(){this.updateSiteObserver.off()}openFocusedInstance(){const e=C.b.getRouteNumberParam("blockInstanceId");e&&s.OQ.openSideModal({component:T.x,componentProps:{contextLevel:"course",instanceId:this.siteHomeId,initialBlockInstanceId:e}})}}return(e=CoreSiteHomeIndexPage).ɵfac=function CoreSiteHomeIndexPage_Factory(n){return new(n||e)(H.Y36(o.gz))},e.ɵcmp=H.Xpm({type:e,selectors:[["page-core-sitehome-index"]],decls:22,vars:10,consts:[["slot","end","prepend",""],[3,"click",4,"ngIf"],["slot","fixed",3,"disabled","ionRefresh"],[3,"pullingText"],[3,"hideUntil"],[1,"core-course-module-list-wrapper"],[4,"ngIf"],["slot","fixed","contextLevel","course",3,"instanceId",4,"ngIf"],["icon","fas-box-open",3,"message",4,"ngIf"],["allCourseList",""],["news",""],["categories",""],["enrolledCourseList",""],["courseSearch",""],[3,"click"],["name","fas-magnifying-glass","slot","icon-only","aria-hidden","true"],["class","ion-text-wrap section-summary",4,"ngIf"],[3,"module","section",4,"ngFor","ngForOf"],[1,"ion-text-wrap","section-summary"],["contextLevel","course",3,"text","contextInstanceId"],[3,"module","section"],[4,"ngFor","ngForOf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngTemplateOutlet"],["slot","fixed","contextLevel","course",3,"instanceId"],["icon","fas-box-open",3,"message"],["button","",1,"ion-text-wrap",3,"click"],["name","fas-graduation-cap","fixed-width","","slot","start","aria-hidden","true"],[1,"item-heading"],["class","core-sitehome-news",3,"module",4,"ngIf"],[1,"core-sitehome-news",3,"module"],["name","fas-folder","slot","start","aria-hidden","true"],["name","fas-magnifying-glass","slot","start","aria-hidden","true"]],template:function CoreSiteHomeIndexPage_Template(e,n){1&e&&(H.TgZ(0,"core-navbar-buttons",0),H.YNc(1,CoreSiteHomeIndexPage_ion_button_1_Template,3,3,"ion-button",1),H.qZA(),H.TgZ(2,"ion-content")(3,"ion-refresher",2),H.NdJ("ionRefresh",(function CoreSiteHomeIndexPage_Template_ion_refresher_ionRefresh_3_listener(e){return n.doRefresh(e.target)})),H._UZ(4,"ion-refresher-content",3),H.ALo(5,"translate"),H.qZA(),H.TgZ(6,"core-loading",4)(7,"ion-list",5),H.YNc(8,CoreSiteHomeIndexPage_ng_container_8_Template,3,2,"ng-container",6)(9,CoreSiteHomeIndexPage_ng_container_9_Template,3,2,"ng-container",6),H.qZA(),H.YNc(10,CoreSiteHomeIndexPage_core_block_side_blocks_button_10_Template,1,1,"core-block-side-blocks-button",7)(11,CoreSiteHomeIndexPage_core_empty_box_11_Template,2,3,"core-empty-box",8),H.qZA()(),H.YNc(12,CoreSiteHomeIndexPage_ng_template_12_Template,7,3,"ng-template",null,9,H.W1O)(14,CoreSiteHomeIndexPage_ng_template_14_Template,1,1,"ng-template",null,10,H.W1O)(16,CoreSiteHomeIndexPage_ng_template_16_Template,7,3,"ng-template",null,11,H.W1O)(18,CoreSiteHomeIndexPage_ng_template_18_Template,7,3,"ng-template",null,12,H.W1O)(20,CoreSiteHomeIndexPage_ng_template_20_Template,7,3,"ng-template",null,13,H.W1O)),2&e&&(H.xp6(),H.Q6J("ngIf",n.searchEnabled),H.xp6(2),H.Q6J("disabled",!n.dataLoaded),H.xp6(),H.s9C("pullingText",H.lcZ(5,8,"core.pulltorefresh")),H.xp6(2),H.Q6J("hideUntil",n.dataLoaded),H.xp6(2),H.Q6J("ngIf",n.section&&n.section.hasContent),H.xp6(),H.Q6J("ngIf",n.items.length>0),H.xp6(),H.Q6J("ngIf",n.hasBlocks),H.xp6(),H.Q6J("ngIf",!n.hasContent))},dependencies:[P.sg,P.O5,P.tP,P.RF,P.n9,b.z,y.r,w.J,v.w,Z.I,k.r,O.t,M.O,J.YG,J.PM,J.W2,J.gu,J.Ie,J.Q$,J.q_,J.nJ,J.Wo,Q.R,F.o,N.X$],styles:["ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{display:inline-block;border-radius:var(--radius-xs);padding:4px;background-color:var(--gray-100);color:var(--gray-900);line-height:var(--size);--margin-end: 8px;margin-inline-end:var(--margin-end)}core-spacer[_ngcontent-%COMP%]{--spacer-horizontal: 10px}"]}),CoreSiteHomeIndexPage})();const A=[{path:"",component:E}];let L=(()=>{var e;class CoreSiteHomeLazyModule{}return(e=CoreSiteHomeLazyModule).ɵfac=function CoreSiteHomeLazyModule_Factory(n){return new(n||e)},e.ɵmod=H.oAB({type:e}),e.ɵinj=H.cJS({imports:[o.Bz.forChild(A),_.L,i.X,a.$,o.Bz]}),CoreSiteHomeLazyModule})();void(("undefined"==typeof ngJitMode||ngJitMode)&&H.kYT(L,{declarations:[E],imports:[o.Bz,_.L,i.X,a.$],exports:[o.Bz]}))}}]);