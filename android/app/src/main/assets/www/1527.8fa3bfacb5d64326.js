"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1527],{1527:(n,e,t)=>{t.r(e),t.d(e,{AddonNotificationsSettingsLazyModule:()=>I});var o=t(67643),i=t(13386),_=t(49671),a=t(5973),r=t(18040),c=t(53564),s=t(13010),g=t(75803),l=t(45151),d=t(58897),p=t(18005),f=t(31381),m=t(98370),u=t(65578),N=t(87985),A=t(43555),h=t(88817),P=t(43468),x=t(10727),T=t(19212),w=t(96814),S=t(61341),Z=t(11771),y=t(17418),M=t(66931),b=t(78308),v=t(29657),O=t(56223),C=t(31903),J=t(89515);function AddonNotificationsSettingsPage_core_context_menu_item_12_Template(n,e){if(1&n){const n=T.EpF();T.TgZ(0,"core-context-menu-item",12),T.NdJ("action",(function AddonNotificationsSettingsPage_core_context_menu_item_12_Template_core_context_menu_item_action_0_listener(){const e=T.CHM(n).$implicit,t=T.oxw();return T.KtG(t.openExtraPreferences(e))})),T.ALo(1,"translate"),T.qZA()}if(2&n){const n=e.$implicit;T.Q6J("priority",n.priority)("content",T.lcZ(1,3,n.label))("iconAction",n.icon)}}function AddonNotificationsSettingsPage_ion_item_19_Template(n,e){if(1&n){const n=T.EpF();T.TgZ(0,"ion-item",13)(1,"ion-toggle",14),T.NdJ("ngModelChange",(function AddonNotificationsSettingsPage_ion_item_19_Template_ion_toggle_ngModelChange_1_listener(e){T.CHM(n);const t=T.oxw();return T.KtG(t.preferences.enableall=e)}))("ngModelChange",(function AddonNotificationsSettingsPage_ion_item_19_Template_ion_toggle_ngModelChange_1_listener(){T.CHM(n);const e=T.oxw();return T.KtG(e.enableAll(e.preferences.enableall))})),T.TgZ(2,"p",15),T._uU(3),T.ALo(4,"translate"),T.qZA()()()}if(2&n){const n=T.oxw();T.xp6(),T.Q6J("ngModel",n.preferences.enableall),T.xp6(2),T.Oqu(T.lcZ(4,2,"addon.notifications.allownotifications"))}}function AddonNotificationsSettingsPage_ion_item_20_Template(n,e){if(1&n){const n=T.EpF();T.TgZ(0,"ion-item",13)(1,"ion-toggle",14),T.NdJ("ngModelChange",(function AddonNotificationsSettingsPage_ion_item_20_Template_ion_toggle_ngModelChange_1_listener(e){T.CHM(n);const t=T.oxw();return T.KtG(t.notificationSound=e)}))("ngModelChange",(function AddonNotificationsSettingsPage_ion_item_20_Template_ion_toggle_ngModelChange_1_listener(){T.CHM(n);const e=T.oxw();return T.KtG(e.changeNotificationSound(e.notificationSound))})),T.TgZ(2,"p",15),T._uU(3),T.ALo(4,"translate"),T.qZA()()()}if(2&n){const n=T.oxw();T.xp6(),T.Q6J("ngModel",n.notificationSound),T.xp6(2),T.Oqu(T.lcZ(4,2,"addon.notifications.playsound"))}}function AddonNotificationsSettingsPage_ion_item_22_ion_select_option_5_Template(n,e){if(1&n&&(T.TgZ(0,"ion-select-option",20),T._uU(1),T.qZA()),2&n){const n=e.$implicit;T.Q6J("value",n.name),T.xp6(),T.hij(" ",n.displayname," ")}}function AddonNotificationsSettingsPage_ion_item_22_Template(n,e){if(1&n){const n=T.EpF();T.TgZ(0,"ion-item",16)(1,"ion-select",17),T.NdJ("ngModelChange",(function AddonNotificationsSettingsPage_ion_item_22_Template_ion_select_ngModelChange_1_listener(e){T.CHM(n);const t=T.oxw();return T.KtG(t.currentProcessorName=e)}))("ionChange",(function AddonNotificationsSettingsPage_ion_item_22_Template_ion_select_ionChange_1_listener(e){T.CHM(n);const t=T.oxw();return T.KtG(t.changeProcessor(e))})),T.TgZ(2,"p",18),T._uU(3),T.ALo(4,"translate"),T.qZA(),T.YNc(5,AddonNotificationsSettingsPage_ion_item_22_ion_select_option_5_Template,2,2,"ion-select-option",19),T.qZA()()}if(2&n){const n=T.oxw();T.xp6(),T.Q6J("ngModel",n.currentProcessorName),T.xp6(2),T.Oqu(T.lcZ(4,3,"addon.notifications.typeofnotification")),T.xp6(2),T.Q6J("ngForOf",null==n.preferences?null:n.preferences.processors)}}function AddonNotificationsSettingsPage_ng_container_23_ng_container_1_Template(n,e){1&n&&T.GkF(0)}const _c0=n=>({preferences:n});function AddonNotificationsSettingsPage_ng_container_23_Template(n,e){if(1&n&&(T.ynx(0),T.YNc(1,AddonNotificationsSettingsPage_ng_container_23_ng_container_1_Template,1,0,"ng-container",21),T.BQk()),2&n){const n=T.oxw(),e=T.MAs(26);T.xp6(),T.Q6J("ngTemplateOutlet",e)("ngTemplateOutletContext",T.VKq(2,_c0,n.preferences))}}function AddonNotificationsSettingsPage_ng_container_24_ng_container_1_Template(n,e){1&n&&T.GkF(0)}function AddonNotificationsSettingsPage_ng_container_24_Template(n,e){if(1&n&&(T.ynx(0),T.YNc(1,AddonNotificationsSettingsPage_ng_container_24_ng_container_1_Template,1,0,"ng-container",21),T.BQk()),2&n){const n=T.oxw(),e=T.MAs(28);T.xp6(),T.Q6J("ngTemplateOutlet",e)("ngTemplateOutletContext",T.VKq(2,_c0,n.preferences))}}function AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_col_7_ng_container_1_core_button_with_spinner_1_Template(n,e){if(1&n){const n=T.EpF();T.TgZ(0,"core-button-with-spinner",37)(1,"ion-toggle",14),T.NdJ("ngModelChange",(function AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_col_7_ng_container_1_core_button_with_spinner_1_Template_ion_toggle_ngModelChange_1_listener(e){T.CHM(n);const t=T.oxw(2).$implicit,o=T.oxw().$implicit,i=T.oxw(3);return T.KtG(o.processorsByName[i.currentProcessorName][t].checked=e)}))("ngModelChange",(function AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_col_7_ng_container_1_core_button_with_spinner_1_Template_ion_toggle_ngModelChange_1_listener(){T.CHM(n);const e=T.oxw(2).$implicit,t=T.oxw().$implicit,o=T.oxw(3);return T.KtG(o.changePreferenceLegacy(t,e))})),T.qZA()()}if(2&n){const n=T.oxw(2).$implicit,e=T.oxw().$implicit,t=T.oxw(3);T.Q6J("loading",e.processorsByName[t.currentProcessorName][n].updating),T.xp6(),T.Q6J("ngModel",e.processorsByName[t.currentProcessorName][n].checked)}}function AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_col_7_ng_container_1_span_2_Template(n,e){1&n&&(T.TgZ(0,"span",38),T._uU(1),T.ALo(2,"translate"),T.qZA()),2&n&&(T.xp6(),T.hij(" ",T.lcZ(2,1,"core.settings.forced")," "))}function AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_col_7_ng_container_1_span_3_Template(n,e){1&n&&(T.TgZ(0,"span",38),T._uU(1),T.ALo(2,"translate"),T.qZA()),2&n&&(T.xp6(),T.hij(" ",T.lcZ(2,1,"core.settings.disallowed")," "))}function AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_col_7_ng_container_1_Template(n,e){if(1&n&&(T.ynx(0),T.YNc(1,AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_col_7_ng_container_1_core_button_with_spinner_1_Template,2,2,"core-button-with-spinner",36)(2,AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_col_7_ng_container_1_span_2_Template,3,3,"span",35)(3,AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_col_7_ng_container_1_span_3_Template,3,3,"span",35),T.BQk()),2&n){const n=T.oxw().$implicit,e=T.oxw().$implicit,t=T.oxw(3);T.xp6(),T.Q6J("ngIf",!e.processorsByName[t.currentProcessorName].locked),T.xp6(),T.Q6J("ngIf",e.processorsByName[t.currentProcessorName].locked&&e.processorsByName[t.currentProcessorName][n].checked),T.xp6(),T.Q6J("ngIf",e.processorsByName[t.currentProcessorName].locked&&!e.processorsByName[t.currentProcessorName][n].checked)}}function AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_col_7_span_2_Template(n,e){1&n&&(T.TgZ(0,"span",38),T._uU(1),T.ALo(2,"translate"),T.qZA()),2&n&&(T.xp6(),T.Oqu(T.lcZ(2,1,"core.settings.disabled")))}function AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_col_7_Template(n,e){if(1&n&&(T.TgZ(0,"ion-col",34),T.YNc(1,AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_col_7_ng_container_1_Template,4,3,"ng-container",9)(2,AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_col_7_span_2_Template,3,3,"span",35),T.qZA()),2&n){const n=e.$implicit,t=T.oxw().$implicit,o=T.oxw(2).preferences,i=T.oxw();T.xp6(),T.Q6J("ngIf",o.enableall&&t.processorsByName[i.currentProcessorName][n]),T.xp6(),T.Q6J("ngIf",!o.enableall)}}function AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_item_12_div_5_core_button_with_spinner_1_ion_toggle_1_Template(n,e){if(1&n){const n=T.EpF();T.TgZ(0,"ion-toggle",14),T.NdJ("ngModelChange",(function AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_item_12_div_5_core_button_with_spinner_1_ion_toggle_1_Template_ion_toggle_ngModelChange_0_listener(e){T.CHM(n);const t=T.oxw(3).$implicit,o=T.oxw().$implicit,i=T.oxw(3);return T.KtG(o.processorsByName[i.currentProcessorName][t].checked=e)}))("ngModelChange",(function AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_item_12_div_5_core_button_with_spinner_1_ion_toggle_1_Template_ion_toggle_ngModelChange_0_listener(){T.CHM(n);const e=T.oxw(3).$implicit,t=T.oxw().$implicit,o=T.oxw(3);return T.KtG(o.changePreferenceLegacy(t,e))})),T.qZA()}if(2&n){const n=T.oxw(3).$implicit,e=T.oxw().$implicit,t=T.oxw(3);T.Q6J("ngModel",e.processorsByName[t.currentProcessorName][n].checked)}}function AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_item_12_div_5_core_button_with_spinner_1_Template(n,e){if(1&n&&(T.TgZ(0,"core-button-with-spinner",37),T.YNc(1,AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_item_12_div_5_core_button_with_spinner_1_ion_toggle_1_Template,1,1,"ion-toggle",43),T.qZA()),2&n){const n=T.oxw(2).$implicit,e=T.oxw().$implicit,t=T.oxw(3);T.Q6J("loading",e.processorsByName[t.currentProcessorName][n].updating),T.xp6(),T.Q6J("ngIf",!e.processorsByName[t.currentProcessorName].locked)}}function AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_item_12_div_5_span_2_Template(n,e){1&n&&(T.TgZ(0,"span",38),T._uU(1),T.ALo(2,"translate"),T.qZA()),2&n&&(T.xp6(),T.hij(" ",T.lcZ(2,1,"core.settings.forced")," "))}function AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_item_12_div_5_span_3_Template(n,e){1&n&&(T.TgZ(0,"span",38),T._uU(1),T.ALo(2,"translate"),T.qZA()),2&n&&(T.xp6(),T.hij(" ",T.lcZ(2,1,"core.settings.disallowed")," "))}function AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_item_12_div_5_Template(n,e){if(1&n&&(T.TgZ(0,"div",2),T.YNc(1,AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_item_12_div_5_core_button_with_spinner_1_Template,2,2,"core-button-with-spinner",36)(2,AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_item_12_div_5_span_2_Template,3,3,"span",35)(3,AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_item_12_div_5_span_3_Template,3,3,"span",35),T.qZA()),2&n){const n=T.oxw().$implicit,e=T.oxw().$implicit,t=T.oxw(3);T.xp6(),T.Q6J("ngIf",!e.processorsByName[t.currentProcessorName].locked),T.xp6(),T.Q6J("ngIf",e.processorsByName[t.currentProcessorName].locked&&e.processorsByName[t.currentProcessorName][n].checked),T.xp6(),T.Q6J("ngIf",e.processorsByName[t.currentProcessorName].locked&&!e.processorsByName[t.currentProcessorName][n].checked)}}function AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_item_12_span_6_Template(n,e){1&n&&(T.TgZ(0,"span",44),T._uU(1),T.ALo(2,"translate"),T.qZA()),2&n&&(T.xp6(),T.Oqu(T.lcZ(2,1,"core.settings.disabled")))}function AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_item_12_Template(n,e){if(1&n&&(T.TgZ(0,"ion-item",39)(1,"ion-label",40)(2,"p"),T._uU(3),T.ALo(4,"translate"),T.qZA()(),T.YNc(5,AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_item_12_div_5_Template,4,3,"div",41)(6,AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_item_12_span_6_Template,3,3,"span",42),T.qZA()),2&n){const n=e.$implicit,t=T.oxw().$implicit,o=T.oxw(2).preferences,i=T.oxw();T.xp6(3),T.Oqu(T.lcZ(4,3,"core.settings."+n)),T.xp6(2),T.Q6J("ngIf",o.enableall&&t.processorsByName[i.currentProcessorName][n]),T.xp6(),T.Q6J("ngIf",!o.enableall)}}const _c1=()=>["loggedin","loggedoff"];function AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_Template(n,e){if(1&n&&(T.ynx(0),T.TgZ(1,"ion-item",28)(2,"ion-label")(3,"ion-row",29)(4,"ion-col",30)(5,"p",15),T._uU(6),T.qZA()(),T.YNc(7,AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_col_7_Template,3,2,"ion-col",31),T.qZA()()(),T.TgZ(8,"ion-item",32)(9,"ion-label")(10,"p",15),T._uU(11),T.qZA()()(),T.YNc(12,AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_item_12_Template,7,5,"ion-item",33),T.BQk()),2&n){const n=e.$implicit;T.xp6(6),T.Oqu(n.displayname),T.xp6(),T.Q6J("ngForOf",T.DdM(4,_c1)),T.xp6(4),T.Oqu(n.displayname),T.xp6(),T.Q6J("ngForOf",T.DdM(5,_c1))}}function AddonNotificationsSettingsPage_ng_template_25_ng_container_0_Template(n,e){if(1&n&&(T.ynx(0,23),T.TgZ(1,"ion-card-header",24)(2,"ion-item",25)(3,"ion-label",13)(4,"ion-row",24)(5,"ion-col",24)(6,"p",15),T._uU(7),T.qZA()(),T.TgZ(8,"ion-col",26)(9,"p"),T._uU(10),T.ALo(11,"translate"),T.qZA()(),T.TgZ(12,"ion-col",26)(13,"p"),T._uU(14),T.ALo(15,"translate"),T.qZA()()()()()(),T.YNc(16,AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_Template,13,6,"ng-container",27),T.BQk()),2&n){const n=e.$implicit;T.xp6(7),T.Oqu(n.displayname),T.xp6(3),T.Oqu(T.lcZ(11,4,"core.settings.loggedin")),T.xp6(4),T.Oqu(T.lcZ(15,6,"core.settings.loggedoff")),T.xp6(2),T.Q6J("ngForOf",n.notifications)}}function AddonNotificationsSettingsPage_ng_template_25_Template(n,e){if(1&n&&T.YNc(0,AddonNotificationsSettingsPage_ng_template_25_ng_container_0_Template,17,8,"ng-container",22),2&n){const n=T.oxw();T.Q6J("ngForOf",n.components)}}function AddonNotificationsSettingsPage_ng_template_27_ng_container_0_ng_container_5_div_5_core_button_with_spinner_1_ion_toggle_1_Template(n,e){if(1&n){const n=T.EpF();T.TgZ(0,"ion-toggle",14),T.NdJ("ngModelChange",(function AddonNotificationsSettingsPage_ng_template_27_ng_container_0_ng_container_5_div_5_core_button_with_spinner_1_ion_toggle_1_Template_ion_toggle_ngModelChange_0_listener(e){T.CHM(n);const t=T.oxw(3).$implicit,o=T.oxw(3);return T.KtG(t.processorsByName[o.currentProcessorName].enabled=e)}))("ngModelChange",(function AddonNotificationsSettingsPage_ng_template_27_ng_container_0_ng_container_5_div_5_core_button_with_spinner_1_ion_toggle_1_Template_ion_toggle_ngModelChange_0_listener(){T.CHM(n);const e=T.oxw(3).$implicit,t=T.oxw(3);return T.KtG(t.changePreference(e))})),T.qZA()}if(2&n){const n=T.oxw(3).$implicit,e=T.oxw(3);T.Q6J("ngModel",n.processorsByName[e.currentProcessorName].enabled)}}function AddonNotificationsSettingsPage_ng_template_27_ng_container_0_ng_container_5_div_5_core_button_with_spinner_1_Template(n,e){if(1&n&&(T.TgZ(0,"core-button-with-spinner",37),T.YNc(1,AddonNotificationsSettingsPage_ng_template_27_ng_container_0_ng_container_5_div_5_core_button_with_spinner_1_ion_toggle_1_Template,1,1,"ion-toggle",43),T.qZA()),2&n){const n=T.oxw(2).$implicit,e=T.oxw(3);T.Q6J("loading",n.processorsByName[e.currentProcessorName].updating),T.xp6(),T.Q6J("ngIf",!n.processorsByName[e.currentProcessorName].locked)}}function AddonNotificationsSettingsPage_ng_template_27_ng_container_0_ng_container_5_div_5_span_2_Template(n,e){1&n&&(T.TgZ(0,"span",38),T._uU(1),T.ALo(2,"translate"),T.qZA()),2&n&&(T.xp6(),T.hij(" ",T.lcZ(2,1,"core.settings.forced")," "))}function AddonNotificationsSettingsPage_ng_template_27_ng_container_0_ng_container_5_div_5_span_3_Template(n,e){1&n&&(T.TgZ(0,"span",38),T._uU(1),T.ALo(2,"translate"),T.qZA()),2&n&&(T.xp6(),T.hij(" ",T.lcZ(2,1,"core.settings.disallowed")," "))}function AddonNotificationsSettingsPage_ng_template_27_ng_container_0_ng_container_5_div_5_Template(n,e){if(1&n&&(T.TgZ(0,"div",2),T.YNc(1,AddonNotificationsSettingsPage_ng_template_27_ng_container_0_ng_container_5_div_5_core_button_with_spinner_1_Template,2,2,"core-button-with-spinner",36)(2,AddonNotificationsSettingsPage_ng_template_27_ng_container_0_ng_container_5_div_5_span_2_Template,3,3,"span",35)(3,AddonNotificationsSettingsPage_ng_template_27_ng_container_0_ng_container_5_div_5_span_3_Template,3,3,"span",35),T.qZA()),2&n){const n=T.oxw().$implicit,e=T.oxw(3);T.xp6(),T.Q6J("ngIf",!n.processorsByName[e.currentProcessorName].locked),T.xp6(),T.Q6J("ngIf",n.processorsByName[e.currentProcessorName].locked&&n.processorsByName[e.currentProcessorName].enabled),T.xp6(),T.Q6J("ngIf",n.processorsByName[e.currentProcessorName].locked&&!n.processorsByName[e.currentProcessorName].enabled)}}function AddonNotificationsSettingsPage_ng_template_27_ng_container_0_ng_container_5_span_6_Template(n,e){1&n&&(T.TgZ(0,"span",44),T._uU(1),T.ALo(2,"translate"),T.qZA()),2&n&&(T.xp6(),T.Oqu(T.lcZ(2,1,"core.settings.disabled")))}function AddonNotificationsSettingsPage_ng_template_27_ng_container_0_ng_container_5_Template(n,e){if(1&n&&(T.ynx(0),T.TgZ(1,"ion-item",13)(2,"ion-label")(3,"p"),T._uU(4),T.qZA()(),T.YNc(5,AddonNotificationsSettingsPage_ng_template_27_ng_container_0_ng_container_5_div_5_Template,4,3,"div",41)(6,AddonNotificationsSettingsPage_ng_template_27_ng_container_0_ng_container_5_span_6_Template,3,3,"span",42),T.qZA(),T.BQk()),2&n){const n=e.$implicit,t=T.oxw(2).preferences;T.xp6(4),T.Oqu(n.displayname),T.xp6(),T.Q6J("ngIf",t.enableall),T.xp6(),T.Q6J("ngIf",!t.enableall)}}function AddonNotificationsSettingsPage_ng_template_27_ng_container_0_Template(n,e){if(1&n&&(T.ynx(0,23),T.TgZ(1,"ion-item-divider",13)(2,"ion-label")(3,"p",15),T._uU(4),T.qZA()()(),T.YNc(5,AddonNotificationsSettingsPage_ng_template_27_ng_container_0_ng_container_5_Template,7,3,"ng-container",27),T.BQk()),2&n){const n=e.$implicit;T.xp6(4),T.Oqu(n.displayname),T.xp6(),T.Q6J("ngForOf",n.notifications)}}function AddonNotificationsSettingsPage_ng_template_27_Template(n,e){if(1&n&&T.YNc(0,AddonNotificationsSettingsPage_ng_template_27_ng_container_0_Template,6,2,"ng-container",22),2&n){const n=T.oxw();T.Q6J("ngForOf",n.components)}}let q=(()=>{var n;class AddonNotificationsSettingsPage{constructor(){this.currentProcessorName="airnotifier",this.preferencesLoaded=!1,this.notificationSound=!1,this.processorHandlers=[],this.loggedInOffLegacyMode=!1,this.canChangeSound=r.L.canDisableSound();const n=c.m9.getRequiredCurrentSite();this.loggedInOffLegacyMode=!n.isVersionGreaterEqualThan("4.0"),this.logView=h.V.once((0,_.Z)((function*(){P.ke.logEvent({type:P.gM.VIEW_ITEM_LIST,ws:"core_message_get_user_notification_preferences",name:x.vN.instant("addon.notifications.notificationpreferences"),data:{category:"notifications"},url:"/message/notificationpreferences.php"})})))}ngOnInit(){var n=this;return(0,_.Z)((function*(){n.canChangeSound&&(n.notificationSound=yield a.b.get(p.i.SETTINGS_NOTIFICATION_SOUND,!0)),n.fetchPreferences()}))()}fetchPreferences(){var n=this;return(0,_.Z)((function*(){try{const e=yield u.hv.getNotificationPreferences();let t=e.processors.find((e=>e.name==n.currentProcessorName));if(t||(t=e.processors[0]),!t)throw new f.G("No processor found");e.enableall=!e.disableall,n.preferences=N.T.formatPreferences(e),n.loadProcessor(t),n.logView()}catch(n){s.OQ.showErrorModal(n)}finally{n.preferencesLoaded=!0}}))()}loadProcessor(n){var e;if(!n)return;if(this.currentProcessorName=n.name,this.processorHandlers=[],this.components=N.T.getProcessorComponents(n.name,(null===(e=this.preferences)||void 0===e?void 0:e.components)||[]),!n.hassettings||!n.supported)return;const t=d.z.getDisplayData(n);t&&this.processorHandlers.push(t)}updatePreferencesAfterDelay(){clearTimeout(this.updateTimeout),this.updateTimeout=window.setTimeout((()=>{this.updateTimeout=void 0,this.updatePreferences()}),5e3)}updatePreferences(){return(0,_.Z)((function*(){yield g.Tr.ignoreErrors(u.hv.invalidateNotificationPreferences()),yield u.hv.getNotificationPreferences()}))()}changeProcessor(n){var e;const t=null===(e=this.preferences)||void 0===e?void 0:e.processors.find((e=>e.name==n));t&&this.loadProcessor(t)}refreshPreferences(n){var e=this;return(0,_.Z)((function*(){try{yield g.Tr.ignoreErrors(u.hv.invalidateNotificationPreferences()),yield e.fetchPreferences()}finally{null==n||n.complete()}}))()}openExtraPreferences(n){A.b.navigateToSitePath(n.page,{params:n.pageParams})}changePreferenceLegacy(n,e){var t=this;return(0,_.Z)((function*(){var o;const i=null===(o=n.processorsByName)||void 0===o?void 0:o[t.currentProcessorName];if(!i)return;const _=i[e],a=n.preferencekey+"_"+_.name;let r=n.processors.filter((n=>n[e].checked)).map((n=>n.name)).join(",");""==r&&(r="none"),_.updating=!0;try{yield l.My.updateUserPreference(a,r),t.updatePreferencesAfterDelay()}catch(n){s.OQ.showErrorModal(n),i[e].checked=!i[e].checked}finally{_.updating=!1}}))()}changePreference(n){var e=this;return(0,_.Z)((function*(){var t;const o=null===(t=n.processorsByName)||void 0===t?void 0:t[e.currentProcessorName];if(!o)return;const i=n.preferencekey+"_enabled";let _=n.processors.filter((n=>n.enabled)).map((n=>n.name)).join(",");""==_&&(_="none"),o.updating=!0;try{yield l.My.updateUserPreference(i,_),e.updatePreferencesAfterDelay()}catch(n){s.OQ.showErrorModal(n),o.enabled=!o.enabled}finally{o.updating=!1}}))()}enableAll(n){var e=this;return(0,_.Z)((function*(){if(!e.preferences)return;const t=yield s.OQ.showModalLoading("core.sending",!0);try{l.My.updateUserPreferences([],!n),e.updatePreferencesAfterDelay()}catch(n){s.OQ.showErrorModal(n),e.preferences.enableall=!e.preferences.enableall}finally{t.dismiss()}}))()}changeNotificationSound(n){return(0,_.Z)((function*(){yield g.Tr.ignoreErrors(a.b.set(p.i.SETTINGS_NOTIFICATION_SOUND,n?1:0));const e=c.m9.getCurrentSiteId();m.R.trigger(m.R.NOTIFICATION_SOUND_CHANGED,{enabled:n},e),r.L.rescheduleAll()}))()}ngOnDestroy(){this.updateTimeout&&(clearTimeout(this.updateTimeout),this.updatePreferences())}}return(n=AddonNotificationsSettingsPage).ɵfac=function AddonNotificationsSettingsPage_Factory(e){return new(e||n)},n.ɵcmp=T.Xpm({type:n,selectors:[["page-addon-notifications-settings"]],decls:29,vars:17,consts:[["slot","start"],[3,"text"],["slot","end"],[3,"priority","content","iconAction","action",4,"ngFor","ngForOf"],["slot","fixed",3,"disabled","ionRefresh"],[3,"pullingText"],[3,"hideUntil"],["class","ion-text-wrap",4,"ngIf"],["class","ion-text-wrap addon-notification-type-form","lines","none",4,"ngIf"],[4,"ngIf"],["legacySettings",""],["settings",""],[3,"priority","content","iconAction","action"],[1,"ion-text-wrap"],[3,"ngModel","ngModelChange"],[1,"item-heading"],["lines","none",1,"ion-text-wrap","addon-notification-type-form"],["interface","popover",3,"ngModel","ngModelChange","ionChange"],["slot","label",1,"item-heading"],["class","ion-text-wrap",3,"value",4,"ngFor","ngForOf"],[1,"ion-text-wrap",3,"value"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","ion-margin-top",4,"ngFor","ngForOf"],[1,"ion-margin-top"],[1,"ion-no-padding"],[1,"ion-text-wrap","divider"],["size","2",1,"ion-text-center","ion-no-padding","ion-hide-md-down"],[4,"ngFor","ngForOf"],[1,"ion-text-wrap","ion-hide-md-down","addon-notifications-table-content","only-links"],[1,"ion-no-padding","ion-align-items-center"],[1,"ion-margin-horizontal","ion-no-padding"],["size","2","class","ion-text-center ion-no-padding",4,"ngFor","ngForOf"],[1,"ion-text-wrap","ion-no-margin","ion-hide-md-up"],["class","ion-text-wrap ion-hide-md-up",4,"ngFor","ngForOf"],["size","2",1,"ion-text-center","ion-no-padding"],["class","text-gray",4,"ngIf"],[3,"loading",4,"ngIf"],[3,"loading"],[1,"text-gray"],[1,"ion-text-wrap","ion-hide-md-up"],[1,"ion-margin-horizontal"],["slot","end",4,"ngIf"],["class","text-gray","slot","end",4,"ngIf"],[3,"ngModel","ngModelChange",4,"ngIf"],["slot","end",1,"text-gray"]],template:function AddonNotificationsSettingsPage_Template(n,e){1&n&&(T.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),T._UZ(3,"ion-back-button",1),T.ALo(4,"translate"),T.qZA(),T.TgZ(5,"ion-title")(6,"h1"),T._uU(7),T.ALo(8,"translate"),T.qZA()(),T._UZ(9,"ion-buttons",2),T.qZA()(),T.TgZ(10,"core-navbar-buttons",2)(11,"core-context-menu"),T.YNc(12,AddonNotificationsSettingsPage_core_context_menu_item_12_Template,2,5,"core-context-menu-item",3),T.qZA()(),T.TgZ(13,"ion-content")(14,"ion-refresher",4),T.NdJ("ionRefresh",(function AddonNotificationsSettingsPage_Template_ion_refresher_ionRefresh_14_listener(n){return e.refreshPreferences(n.target)})),T._UZ(15,"ion-refresher-content",5),T.ALo(16,"translate"),T.qZA(),T.TgZ(17,"core-loading",6)(18,"ion-card"),T.YNc(19,AddonNotificationsSettingsPage_ion_item_19_Template,5,4,"ion-item",7)(20,AddonNotificationsSettingsPage_ion_item_20_Template,5,4,"ion-item",7),T.qZA(),T.TgZ(21,"ion-card"),T.YNc(22,AddonNotificationsSettingsPage_ion_item_22_Template,6,5,"ion-item",8)(23,AddonNotificationsSettingsPage_ng_container_23_Template,2,4,"ng-container",9)(24,AddonNotificationsSettingsPage_ng_container_24_Template,2,4,"ng-container",9),T.qZA()()(),T.YNc(25,AddonNotificationsSettingsPage_ng_template_25_Template,1,1,"ng-template",null,10,T.W1O)(27,AddonNotificationsSettingsPage_ng_template_27_Template,1,1,"ng-template",null,11,T.W1O)),2&n&&(T.xp6(3),T.Q6J("text",T.lcZ(4,11,"core.back")),T.xp6(4),T.Oqu(T.lcZ(8,13,"addon.notifications.notifications")),T.xp6(5),T.Q6J("ngForOf",e.processorHandlers),T.xp6(2),T.Q6J("disabled",!e.preferencesLoaded),T.xp6(),T.s9C("pullingText",T.lcZ(16,15,"core.pulltorefresh")),T.xp6(2),T.Q6J("hideUntil",e.preferencesLoaded),T.xp6(2),T.Q6J("ngIf",e.preferences),T.xp6(),T.Q6J("ngIf",e.canChangeSound),T.xp6(2),T.Q6J("ngIf",null==e.preferences||null==e.preferences.processors?null:e.preferences.processors.length),T.xp6(),T.Q6J("ngIf",e.loggedInOffLegacyMode),T.xp6(),T.Q6J("ngIf",!e.loggedInOffLegacyMode))},dependencies:[w.sg,w.O5,w.tP,S.$,Z.P,y.l,M.r,b.J,v.t,O.JJ,O.On,C.Sm,C.PM,C.Zi,C.wI,C.W2,C.Gu,C.Ie,C.rH,C.Q$,C.nJ,C.Wo,C.Nd,C.t9,C.n0,C.wd,C.ho,C.sr,C.w,C.QI,C.oU,J.X$],styles:[".addon-notifications-table-content[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{min-height:35px}ion-item-divider[_ngcontent-%COMP%], ion-card-header[_ngcontent-%COMP%]{border-top:1px solid var(--stroke)}"]}),AddonNotificationsSettingsPage})();const Q=[{path:"",component:q}];let I=(()=>{var n;class AddonNotificationsSettingsLazyModule{}return(n=AddonNotificationsSettingsLazyModule).ɵfac=function AddonNotificationsSettingsLazyModule_Factory(e){return new(e||n)},n.ɵmod=T.oAB({type:n}),n.ɵinj=T.cJS({imports:[o.Bz.forChild(Q),i.L,o.Bz]}),AddonNotificationsSettingsLazyModule})();void(("undefined"==typeof ngJitMode||ngJitMode)&&T.kYT(I,{declarations:[q],imports:[o.Bz,i.L],exports:[o.Bz]}))}}]);